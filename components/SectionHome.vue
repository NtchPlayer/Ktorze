<template>
  <section class="section-home">
    <h2 class="section-title desktop">
      <div class="section-title-img" @click="drawSvg">
        <svg width="233" height="126" viewBox="0 0 233 126" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M39.1465 94.971C41.0095 95.3828 43.48 95.8913 46.4837 96.3868C49.4874 96.8952 53.0243 97.4036 56.973 97.9956C64.7961 99.2118 74.165 100.306 84.2223 101.001C89.2443 101.335 94.4349 101.561 99.6661 101.689C104.897 101.799 110.169 101.779 115.353 101.664C120.544 101.535 125.646 101.271 130.554 100.923C135.454 100.563 140.152 100.087 144.533 99.5722C154.644 98.298 164.708 96.567 174.482 93.9479C179.369 92.6415 184.182 91.1356 188.852 89.3338C193.517 87.5319 198.053 85.447 202.258 82.9373C206.537 80.3439 210.756 77.6219 214.617 74.6103C218.451 71.5922 222.028 68.2716 224.391 64.4298C225.545 62.5057 226.362 60.4658 226.74 58.3422C227.111 56.2379 227.111 53.9342 226.625 51.9973C225.639 47.9882 222.325 44.6226 218.316 42.1708C214.273 39.6997 209.629 37.9235 204.856 36.585L197.479 34.6738C196.865 34.5193 196.25 34.352 195.629 34.204L193.766 33.7923L190.04 32.9685C180.098 30.8321 170.027 29.2812 159.889 28.4253C139.605 26.6942 119.106 28.0263 99.1599 31.9453C96.0549 32.6017 92.383 33.3096 88.6975 34.262C86.8548 34.7253 84.9716 35.1371 83.1559 35.6197C81.3401 36.1088 79.5649 36.5787 77.8909 37.0291C77.0472 37.2415 76.2305 37.4538 75.4475 37.6533C74.6645 37.8657 73.9152 38.078 73.2065 38.2711C71.789 38.6572 70.5133 38.9854 69.4536 39.2235C67.3206 39.6997 66.0179 39.8412 65.9909 39.4679C65.9639 39.0754 66.7874 38.4513 68.3736 37.6147C69.1701 37.1964 70.1556 36.7331 71.3233 36.2183C72.4978 35.7228 73.8275 35.105 75.3665 34.5773C81.4819 32.3315 90.4052 29.6094 101.502 27.518C114.934 25.034 128.637 23.7341 142.346 23.7341C144.06 23.6826 145.775 23.7856 147.482 23.8178L152.619 23.9658L157.742 24.3133C159.45 24.442 161.164 24.5063 162.859 24.7251L167.962 25.2721C168.812 25.3687 169.663 25.4394 170.513 25.5617L173.051 25.935L178.127 26.675C179.821 26.9259 181.488 27.2798 183.169 27.5758C184.85 27.8911 186.531 28.1807 188.204 28.5153L193.199 29.6223C196.541 30.3109 199.828 31.2054 203.122 32.0484C206.402 32.8463 209.77 33.8436 212.977 35.1242C216.196 36.3984 219.342 37.9428 222.237 39.9441C225.099 41.9712 227.718 44.5195 229.426 47.7114C230.182 49.3395 230.85 51.0512 231.026 52.8402C231.073 53.2842 231.174 53.7347 231.174 54.1658L231.201 55.4657C231.201 55.6845 231.215 55.8969 231.208 56.1157L231.154 56.7657L231.046 58.0656C230.601 61.5405 229.17 64.8611 227.226 67.7183C225.275 70.5948 222.858 73.0594 220.314 75.3053C216.581 78.5937 212.531 81.4315 208.4 84.0956L205.275 86.052C204.222 86.7019 203.122 87.3132 202.042 87.9438L198.721 89.6749C197.594 90.2025 196.466 90.7431 195.332 91.2579C186.2 95.3056 176.581 98.0406 166.882 100.177C162.028 101.245 157.135 102.12 152.221 102.854C147.314 103.594 142.379 104.199 137.439 104.662C132.498 105.139 127.543 105.493 122.589 105.718C117.634 105.962 112.673 106.078 107.712 106.084C97.7896 106.123 87.874 105.698 77.9854 104.881C73.0445 104.444 68.1103 103.929 63.1964 103.285C58.2622 102.61 53.4293 101.889 48.5289 101.149C43.6352 100.389 38.701 99.5013 33.8344 98.1757C28.9812 96.8243 24.1753 95.0289 19.7811 92.4484C17.5671 91.1807 15.4949 89.7071 13.5509 88.0983C12.5587 87.3132 11.6542 86.4316 10.7295 85.5758C9.85874 84.6684 8.961 83.7739 8.16452 82.8022C4.89082 78.9861 2.35286 74.5138 0.989377 69.6617C-0.198605 65.2987 -0.340352 60.6202 0.692382 56.2122C1.21887 54.0113 1.93436 51.8556 2.9131 49.8221C3.89858 47.795 5.03931 45.8387 6.36904 44.0112C7.71227 42.1965 9.17025 40.4654 10.7835 38.8759C12.4035 37.2929 14.1179 35.8065 15.9606 34.4615C17.8101 33.123 19.7271 31.9067 21.7183 30.8127C23.7095 29.7316 25.7547 28.7407 27.8405 27.8591C29.9329 26.9903 32.0524 26.2051 34.1921 25.4973C36.3386 24.8023 38.4985 24.1781 40.672 23.6054C45.0189 22.4921 49.3861 21.5526 53.7668 20.7675L60.3345 19.577C62.5282 19.2166 64.7354 18.9012 66.9359 18.5602L70.2366 18.0647L73.5508 17.6529C75.7647 17.389 77.9652 17.0866 80.1859 16.8549C115.616 13.0582 151.694 14.9566 186.483 22.3377C188.522 22.7881 190.574 23.1743 192.599 23.6827L198.68 25.1626C202.744 26.1408 206.895 27.4086 210.817 29.1461C214.745 30.8836 218.511 33.1229 221.772 35.993L222.393 36.5207C222.595 36.7009 222.777 36.9003 222.973 37.0934L224.114 38.2518C224.512 38.625 224.836 39.0561 225.187 39.4679L226.22 40.7165C226.848 41.5916 227.462 42.4796 228.042 43.387L228.832 44.7898C229.089 45.2596 229.372 45.7164 229.575 46.2119C230.486 48.1425 231.228 50.1374 231.762 52.1773C232.315 54.2301 232.659 56.238 232.909 58.3744C233.287 62.7375 232.45 66.9847 231.087 70.9358C229.71 74.8999 227.793 78.6193 225.565 82.1265C223.331 85.6336 220.773 88.9349 217.931 92.0044C215.083 95.074 211.964 97.9313 208.441 100.415C206.692 101.593 204.958 102.7 203.209 103.839L201.9 104.688L201.245 105.113L200.57 105.505L197.864 107.075C196.055 108.118 194.273 109.199 192.383 110.113C190.506 111.046 188.67 112.043 186.767 112.932L181.002 115.473C179.065 116.284 177.067 116.973 175.103 117.732C167.172 120.57 158.95 122.681 150.608 124.058L144.33 124.952L138.019 125.538C136.966 125.654 135.913 125.692 134.86 125.737L131.694 125.879C130.641 125.911 129.582 126.001 128.529 125.988H125.363C121.718 126.053 118.087 125.834 114.455 125.692C112.639 125.602 110.837 125.422 109.028 125.287L106.315 125.068C105.41 124.997 104.513 124.869 103.615 124.779L98.2149 124.161C96.4194 123.929 94.6374 123.646 92.8419 123.389C89.278 122.9 85.6398 122.262 82.0894 121.458C74.9615 119.856 67.9753 117.648 61.2862 114.753C54.6038 111.857 48.1981 108.266 42.4472 103.806C36.7031 99.3597 31.6137 94.0058 27.881 87.7959C24.1483 81.6053 21.8196 74.6102 21.3201 67.4543C20.8003 60.3049 22.0896 53.1105 24.7018 46.4888C27.314 39.8477 31.1884 33.7343 35.8728 28.3095C40.2738 23.1936 45.8559 18.1162 52.3088 13.9011C55.5285 11.7904 58.9575 9.87918 62.5147 8.26397C63.3989 7.85855 64.3101 7.49188 65.2011 7.10577C66.1056 6.73897 67.0236 6.4107 67.9281 6.0632C69.7573 5.44543 71.5798 4.88559 73.382 4.31286C74.8872 3.88814 76.5342 3.50206 78.2689 3.0516C79.1329 2.8135 80.0374 2.63965 80.9554 2.4659C81.8801 2.28572 82.8184 2.09919 83.7768 1.91257C84.7286 1.70665 85.7141 1.57151 86.7063 1.42993C87.6985 1.28836 88.7043 1.14684 89.7168 0.998831C90.7292 0.831518 91.7552 0.773589 92.788 0.664192C93.8207 0.567665 94.8534 0.471012 95.8862 0.374485C104.168 -0.269028 112.45 0.00766972 118.566 0.52248C123.844 0.979375 129.298 1.6036 134.415 2.31147C135.15 2.40799 135.873 2.49821 136.575 2.59473C137.277 2.70413 137.958 2.80708 138.62 2.90361C139.949 3.10953 141.212 3.30897 142.413 3.49559C144.796 3.92031 146.922 4.29359 148.778 4.66683C150.635 5.0465 152.234 5.39391 153.578 5.70279C154.921 6.03099 156.007 6.32063 156.851 6.5716C160.233 7.58835 159.693 8.03884 155.656 8.05171C153.881 8.07745 155.731 8.89472 150.108 8.05816C149.879 8.02598 149.413 7.95506 149.197 7.92288C140.651 6.79674 132.052 5.53548 123.351 4.73108C114.658 3.91382 105.842 3.51487 97.0606 4.11978C95.7174 4.2163 94.3742 4.3708 93.031 4.49307L91.0195 4.69259L89.0215 4.98214C87.6918 5.18807 86.3486 5.33605 85.0323 5.59989L81.0836 6.38496C80.4221 6.50079 79.7742 6.66808 79.1262 6.84183L77.1822 7.33734L75.2382 7.83286C74.5902 8.00018 73.9625 8.23179 73.3213 8.42484L69.5076 9.64761C68.2723 10.1174 67.0169 10.555 65.8086 11.0955C56.055 15.214 47.2532 21.4432 40.2468 29.1268C33.2674 36.7975 28.016 46.0254 26.0855 55.9355C25.6062 58.4066 25.3093 60.9099 25.2958 63.4132L25.2755 64.3527C25.2755 64.668 25.2958 64.9769 25.3093 65.2922C25.343 65.9164 25.343 66.547 25.397 67.1648C25.5252 68.4068 25.6332 69.6552 25.8762 70.8907C26.045 72.1327 26.396 73.3425 26.666 74.5652C27.0305 75.7685 27.368 76.9848 27.827 78.156C28.7045 80.5177 29.7574 82.8279 31.0534 85.0094C32.3426 87.1973 33.7939 89.3081 35.4138 91.2965C37.0541 93.2721 38.836 95.1512 40.7328 96.9144C44.56 100.422 48.8596 103.491 53.4428 106.123C62.6227 111.387 72.842 115.029 83.3381 117.339C85.9638 117.925 88.603 118.401 91.2827 118.8C93.9759 119.174 96.6556 119.605 99.3556 119.933L103.406 120.39C104.756 120.531 106.105 120.724 107.455 120.808L111.512 121.123C112.862 121.233 114.219 121.349 115.576 121.381C126.402 121.934 137.277 121.593 147.948 120.023L150.405 119.676C151.229 119.566 152.032 119.373 152.842 119.225L157.708 118.273C159.315 117.893 160.908 117.468 162.514 117.069L164.917 116.464L167.28 115.731C168.853 115.235 170.432 114.759 171.998 114.251L176.622 112.52C177.391 112.224 178.167 111.96 178.923 111.638L181.178 110.647C182.676 109.978 184.195 109.341 185.687 108.652L190.081 106.426C190.81 106.052 191.546 105.692 192.275 105.306L194.401 104.077L198.66 101.625C200.044 100.756 201.407 99.8489 202.784 98.9673C204.148 98.0728 205.572 97.204 206.814 96.2709C208.09 95.3378 209.311 94.3146 210.499 93.2593C212.875 91.1421 215.076 88.8255 217.101 86.3866C221.137 81.4959 224.546 76.0775 226.699 70.2988C227.766 67.4158 228.481 64.4364 228.63 61.4827C228.67 60.7426 228.657 60.0089 228.63 59.2817L228.535 58.1942C228.488 57.8274 228.414 57.4413 228.36 57.0681C228.225 56.3152 228.144 55.5558 227.961 54.8158L227.415 52.6021C226.557 49.6935 225.302 46.9199 223.601 44.4102C221.907 41.9005 219.78 39.6675 217.344 37.7627C214.9 35.8514 212.133 34.3071 209.23 33.0007C206.321 31.7073 203.27 30.6325 200.125 29.8217C198.41 29.3455 196.601 28.9594 194.84 28.5282C193.064 28.1164 191.303 27.6659 189.521 27.2863C187.732 26.9195 185.95 26.5462 184.161 26.1794L181.482 25.6259L178.782 25.1369C176.979 24.8151 175.177 24.4871 173.375 24.1653C171.573 23.8243 169.75 23.5925 167.941 23.2965C166.126 23.0198 164.31 22.7109 162.487 22.4535C160.658 22.2089 158.829 21.9645 156.993 21.7199L157.243 21.7521C141.907 19.8538 126.429 19.1715 110.979 19.3903C107.327 19.3839 103.669 19.6027 99.9968 19.725C98.1609 19.77 96.3317 19.9373 94.4957 20.0467C92.6597 20.169 90.8237 20.2978 88.9878 20.42C81.6506 21.0893 74.2865 21.8551 66.9764 23.0005L61.4887 23.8436L56.028 24.8344C52.3763 25.4715 48.7516 26.2052 45.1877 27.0418C41.617 27.8784 38.1003 28.8371 34.6916 30.0083C31.2762 31.1666 27.9755 32.5502 24.857 34.1976C21.7183 35.8321 18.8294 37.7691 16.2306 40.0021C13.6117 42.2222 11.3505 44.7963 9.474 47.5569C7.58403 50.3176 6.22055 53.3486 5.38356 56.4568C4.56682 59.5778 4.43182 62.7954 4.90432 65.9357C5.36331 69.0825 6.55129 72.1328 8.15102 74.9513C9.76424 77.7764 11.8095 80.3891 14.1922 82.6928C16.5681 84.9966 19.2478 87.0171 22.1098 88.7096C24.9785 90.3956 28.0497 91.7664 31.2492 92.8475C33.2336 93.5489 36.0416 94.2695 39.1465 94.971Z" fill="#CEC9B5" />
        </svg>
      </div>La nature vous appelle !
    </h2>
    <h2 class="section-title mobile">
      <span>Balise 360</span><br>vous appelle !
    </h2>
    <vueper-slides
      class="no-shadow"
      bullets-outside
      :arrows="false"
      :breakpoints="breakpoints"
      :slide-ratio="1/2"
      :gap="2"
    >
      <vueper-slide
        v-for="(slide, i) in slides"
        :key="i"
        :image="slide.image"
        :title="slide.title"
        :content="slide.content"
      />
    </vueper-slides>
  </section>
</template>

<script>
import { VueperSlides, VueperSlide } from 'vueperslides'
import 'vueperslides/dist/vueperslides.css'

export default {
  name: 'SectionHome',
  components: {
    VueperSlides,
    VueperSlide
  },
  props: {
    slides: { type: Array, required: true }
  },
  data () {
    return {
      breakpoints: {
        769: {
          visibleSlides: 1,
          draggingDistance: 20,
          gap: 0
        },
        1024: {
          visibleSlides: 3,
          touchable: false
        },
        3200: {
          visibleSlides: 3,
          gap: 10,
          touchable: false
        }
      }
    }
  },
  methods: {
    drawSvg (event) {
      const pathSvg = event.target.children[0]

      if (pathSvg === undefined || null) {
        return
      }
      this.$gsap.set(event.target, { visibility: 'visible' })
      const tl = this.$gsap.timeline({ repeat: 0, repeatDelay: 1 })
      tl.to(event.target, { strokeDashoffset: '=73', repeat: -1, ease: 'power1.out' })
    }
  }
}
</script>

<style lang="scss">
.section{
  &-title{
    position: relative;
    font-family: 'Gotham-bold',serif;
    &.mobile{
      text-align: left;
      max-width: 440px;
    }
    & span{
      color: var(--orange-color);
    }
    &-img{
      position: absolute;
      top: -38px;
      left: -32px;
      & svg path{

      }
    }
  }
  &-home{
    margin: 100px auto;
    max-width: 1124px;
    position: relative;
    &-img{
      position: absolute;
      top: -245px;
      left: -460px;
      z-index: -1;
      &-second{
        position: absolute;
        bottom: -225px;
        right: -460px;
        z-index: -1;
      }
    }
    .btn-primary{
      text-align: center;
      margin: auto;
      max-width: max-content;
      display: block;
    }
  }
}

.container-card{
  margin-top: 100px;
  gap: 25px;
  display: flex;
  justify-content: space-between;
  padding: 0 30px;
}

// CAROUSEL
 .vueperslide{
  background-repeat: no-repeat;
  background-attachment: scroll;
  background-position: 0 0;
  padding: 82px 0 0 0;
  background-size: unset;
  font-family: 'Apfel',serif;
  &__title{
    font-size: 1.5rem;
    margin-bottom: 15px;
    font-family: 'Apfel-bold',serif;
  }
  &__content{
    font-size: 1rem;
    line-height: 1.25rem;
  }
  &__content-wrapper{
    &:not(.vueperslide__content-wrapper--outside-top):not(.vueperslide__content-wrapper--outside-bottom){
      align-items: flex-start;
      text-align: left;
      justify-content: flex-start;
    }
  }
  &s{
    max-height: 300px;
    padding: 0 50px;
    margin: 100px auto 50px auto;
  }
 }

 @media (min-width: 0px) and (max-width: 768px) {
  .section-home{
    margin-bottom: 100px;
    padding: 0 25px;
    .btn-primary{
      display: none;
    }
  }
  .container-card{
    flex-direction: column;
    align-items: center;
  }
 //CAROUSSEL
 .vueperslides{
    position: relative;
    max-width: 440px;
    padding: 0 0;

    &__bullet{
      & .default{
       border: none;
       background-color: var(--orange-color);
     }
     &--active{
      & .default{
        background-color: var(--green-color);
      }
     }
    }
    &__parallax-wrapper{
      min-height: 220px;
    }
  }
}
</style>
