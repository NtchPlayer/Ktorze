<template>
  <header :class="{ 'is-top': isTop }">
    <nav class="main-nav">
      <button type="button" class="mobile" @click.prevent="$emit('openMenu')">
        <svg :class="{ 'black-icon': whiteBackGround }" width="30" height="29" viewBox="0 0 30 29" fill="none">
          <path d="M0 23.7548V28.3087H30V23.7548H0ZM0 12.37V16.9239H30V12.37H0ZM0 0.985229V5.53914H30V0.985229H0Z" fill="white" />
        </svg>
      </button>
      <h1>
        <nuxt-link :to="{name: 'la-randonnee-responsable'}">
          <figure>
            <svg :class="{ 'black-icon': whiteBackGround }" width="129" height="26" viewBox="0 0 129 26" fill="none">
              <path d="M0 0.445796H12.2908C13.1345 0.438525 13.9713 0.596643 14.7523 0.9109C15.5332 1.22516 16.2428 1.68926 16.8394 2.27615C17.4361 2.86303 17.9079 3.56093 18.2274 4.32912C18.5469 5.0973 18.7076 5.92038 18.7002 6.75032C18.7002 9.27085 17.194 11.2751 14.6283 12.019C17.7613 12.6091 19.7565 14.8731 19.7565 17.8778C19.7691 18.7515 19.6047 19.6189 19.2729 20.4295C18.9412 21.2401 18.4487 21.9776 17.8242 22.599C17.1997 23.2204 16.4557 23.7134 15.6355 24.0491C14.8153 24.3848 13.9355 24.5565 13.0471 24.5543H0.00652169L0 0.445796ZM10.7063 10.3098C12.1017 10.3098 13.1188 9.20029 13.1188 7.78931C13.1302 7.46163 13.0744 7.13505 12.9546 6.82906C12.8348 6.52308 12.6536 6.24398 12.4217 6.00842C12.1898 5.77287 11.9121 5.58567 11.605 5.45804C11.298 5.33041 10.9679 5.26496 10.6346 5.26559H5.59116V10.3098H10.7063ZM11.3877 19.5101C11.7422 19.5147 12.0939 19.4483 12.4214 19.3147C12.7489 19.1812 13.0452 18.9833 13.2924 18.7333C13.5395 18.4833 13.7323 18.1864 13.8588 17.8607C13.9854 17.5349 14.0431 17.1872 14.0284 16.8388C14.0393 16.4852 13.9764 16.133 13.8438 15.8041C13.7111 15.4752 13.5115 15.1765 13.2571 14.9263C13.0028 14.6761 12.699 14.4797 12.3647 14.3492C12.0303 14.2187 11.6723 14.1569 11.3127 14.1676H5.59116V19.5101H11.3877Z" fill="white"/>
              <path d="M52.0091 0.445801V19.2856H63.3218V24.5543H46.4277V0.445801H52.0091Z" fill="white"/>
              <path d="M71.0028 0.445801V24.5543H65.4214V0.445801H71.0028Z" fill="white"/>
              <path d="M85.0248 20.1033C86.8733 20.1033 88.6436 19.3625 88.6436 17.7302C88.6436 13.1285 74.7684 14.4657 74.7684 6.75025C74.7684 2.81875 78.3122 0 83.8186 0C89.325 0 93.925 2.78026 94.225 6.60273L87.8905 8.09068C87.7405 6.16662 86.1561 4.75244 83.9783 4.75244C82.1331 4.75244 80.6595 5.75615 80.6595 7.12544C80.6595 11.5027 94.6781 10.1687 94.6781 17.8842C94.6781 22.0754 90.5703 25.0032 84.7216 25.0032C78.6154 25.0032 74.0153 21.7772 73.8621 17.4031L80.3498 16.0659C80.4997 18.3972 82.2048 20.1033 85.0248 20.1033Z" fill="white"/>
              <path d="M115.025 0.448975H97.5308V5.41947H115.025V0.448975Z" fill="white"/>
              <path d="M115.025 10.0146H97.5308V14.9851H115.025V10.0146Z" fill="white"/>
              <path d="M115.025 19.5837H97.5308V24.5542H115.025V19.5837Z" fill="white"/>
              <path d="M29.4947 19.0387L32.4223 13.0741L35.3532 19.0387L38.0754 24.5864H44.3316L38.3721 12.5161L32.4125 0.445801L26.453 12.5161L20.4934 24.5864H26.7692L29.4947 19.0387Z" fill="white"/>
              <path d="M124.681 24.5542H123.87V22.38H124.479C125.337 22.38 125.963 21.8221 125.963 21.0621C125.963 20.302 125.337 19.7473 124.479 19.7473C123.622 19.7473 122.996 20.3053 122.996 21.0621C122.996 21.1579 123.006 21.2535 123.025 21.3475L122.239 22.0369L120.378 20.0904V24.0956H118.37V18.0316H120.521L122.063 20.2764C122.181 18.7179 123.345 17.5891 124.857 17.5891C126.644 17.5891 127.997 19.0322 127.997 21.0204C127.997 23.0663 126.602 24.5542 124.681 24.5542Z" fill="white"/>
              <path d="M123.283 16.6047C120.329 16.6047 118.19 14.902 118.19 12.5418C118.19 11.0538 119.168 9.79356 120.547 9.56588L121.013 11.5669C120.736 11.6665 120.495 11.845 120.321 12.0796C120.147 12.3143 120.047 12.5946 120.035 12.8849C120.035 13.8726 121.124 14.6871 122.644 14.716C122.36 14.4395 122.138 14.1086 121.99 13.7439C121.843 13.3793 121.773 12.9886 121.786 12.5963C121.786 10.7652 123.11 9.45044 124.87 9.45044C126.686 9.45044 128.01 10.8229 128.01 12.7117C127.997 15.0591 126.021 16.6047 123.283 16.6047ZM125.959 12.9394C125.959 12.1826 125.307 11.6246 124.446 11.6246C123.586 11.6246 122.934 12.1826 122.934 12.9394C122.934 13.6962 123.586 14.2574 124.446 14.2574C125.307 14.2574 125.962 13.6994 125.962 12.9394H125.959Z" fill="white"/>
              <path d="M123.097 8.53969C120.26 8.53969 118.207 6.84971 118.207 4.50556C118.207 2.16141 120.273 0.471436 123.097 0.471436C125.92 0.471436 127.987 2.1582 127.987 4.50556C127.987 6.85292 125.933 8.53969 123.097 8.53969ZM125.891 4.50556C125.891 3.37357 124.844 2.70336 123.054 2.70336C121.265 2.70336 120.218 3.37357 120.218 4.50556C120.218 5.63755 121.265 6.30777 123.054 6.30777C124.844 6.30777 125.891 5.63435 125.891 4.50556Z" fill="white"/>
            </svg>
          </figure>
        </nuxt-link>
      </h1>
      <ul class="desktop">
        <li>
          <nuxt-link id="nav-link-functionality" :to="{ hash: 'fonctionnalites', query: $route.query }">
            Nos fonctionnalit√©s
          </nuxt-link>
        </li>

        <li>
          <nuxt-link id="nav-link-choose" :to="{ hash: 'nous-choisir', query: $route.query }">
            Nous choisir
          </nuxt-link>
        </li>

        <li>
          <nuxt-link id="nav-link-newsletter" :to="{ hash: 'newsletter', query: $route.query }">
            Notre newsletter
          </nuxt-link>
        </li>
      </ul>
    </nav>
  </header>
</template>

<script>
export default {
  name: 'Header',
  data () {
    return {
      isTop: true
    }
  },
  computed: {
    whiteBackGround () {
      return (this.$route.query.template === 'pour-tous') || (this.$route.query.template === 'en-famille')
    }
  },
  mounted () {
    document.addEventListener('scroll', this.__style_header)
    document.documentElement.setAttribute('data-header-style', 'root')
  },
  destroyed () {
    document.removeEventListener('scroll', this.__style_header)
  },
  methods: {
    __style_header () {
      this.isTop = window.scrollY === 0
    }
  }
}
</script>

<style lang="scss">
header{
  background: var(--green-color);
  position: fixed;
  z-index: 14;
  width: 100vw;
  transition: 0.2s;
}

.main-nav{
  width: 100%;
  max-width: 1440px;
  padding: 19.5px 50px;
  margin: auto;
  height: 70px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  &--logo{
    width: 138px;
    margin-left: 35px;

  }
  ul{
    display: flex;
    gap: 50px;
    li{
      color: var(--background-color);
      font-family: 'Apfel', sans-serif;
      font-weight: bold;
    }
  }
}

@media screen and (max-width: 768px) {
  header.is-top{
    background-color: transparent;
    transition: 0.2s;
    .black-icon path{
      fill: #000;
    }
  }

  header:not(.is-top) {
    .black-icon path{
      fill: #fff;
    }
  }
}
</style>
